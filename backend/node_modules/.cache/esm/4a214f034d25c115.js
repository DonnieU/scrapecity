let express,getHTML,getTwitterFollowers,getIGFollowers,db;_4d2‍.w("express",[["default",["express"],function(v){express=v}]]);_4d2‍.w("./lib/scraper",[["getHTML",["getHTML"],function(v){getHTML=v}],["getTwitterFollowers",["getTwitterFollowers"],function(v){getTwitterFollowers=v}],["getIGFollowers",["getIGFollowers"],function(v){getIGFollowers=v}]]);_4d2‍.w("./lib/db",[["default",["db"],function(v){db=v}]]);




const app = express();

_4d2‍.g.console.log(db);

app.get('/scrape', async (req, res, next) => {
  console.log('Scraping!!');

  const twUsername = 'wesbos';
  const igUsername = 'wesbos';
  const twHTML = `https://twitter.com/${twUsername}`;
  const igHTML = `https://instagram.com/${igUsername}/?__a=1`;

  // console.log(await getHTML('https://twitter.com/wesbos/'));
  // getTwitterFollowers(await getHTML('https://twitter.com/wesbos/'));
  const html = await getHTML(twHTML);
  const twCount = await getTwitterFollowers(html);
  // console.log(twCount); // returns a Promise b/c it's async fn
  // console.log(await twCount);

  const igCount = await getIGFollowers(igHTML);
  
  console.log(`You have ${twCount} Twitter followers and ${igCount} Instagram followers`);
  res.json({igCount, twCount});
});

const listener = app.listen(2093, deets => { 
  console.log(`Example app running on port ${listener.address().port}`)
});